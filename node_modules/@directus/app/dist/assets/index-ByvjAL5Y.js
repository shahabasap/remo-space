import{T as Se,w as Ue,a as Le,v as Xe}from"./vue.runtime.esm-bundler-CAbrAqDA.js";import{y as et,v as Ce,z as Ae,_ as j,A as he,B as re,C as be,M as tt,w as ve,D as nt,E as ot,F as at,G as st,H as lt,I as it,J as rt,S as ut,K as ct,L as Te,N as dt,O as vt,P as _t,Q as mt,R as pt,T as ft,V as Ee,U as gt}from"./index.DZKk-X6d.entry.js";import{r as ht,u as bt,m as yt,a as wt,b as kt,d as $t}from"./index-DDKqthy1.js";import{storeToRefs as ie}from"./pinia.CcPPvUKL.entry.js";import{useI18n as ae}from"./vue-i18n.BDgO9r8I.entry.js";import{useRoute as St,useRouter as Fe}from"./vue-router.Y6owf-Uq.entry.js";import{e as P,c as V,f as x,y as Ve,w as ne,bg as d,bh as J,bK as R,b8 as l,ar as b,bI as o,at as M,Z as Q,E as a,as as E,au as U,a_ as A,bi as Re,u as i,ay as T,bq as I,be as oe,j as je,bf as Y,aZ as Ct,n as Vt,p as Nt,aw as Mt,a$ as xt,aK as Wt}from"./runtime-core.esm-bundler-DL8OB0Tv.js";const It=["src"],Bt=P({__name:"module-bar-logo",setup(u){const{t:e}=ae(),s=et(),m=Ce(),t=V(()=>{var c;return m.settings===null||!((c=m.settings)!=null&&c.project_logo)?null:Ae(`${m.settings.project_logo}`)}),n=x(!1),{queueHasItems:_}=Ve(s);ne(()=>_.value,c=>{c&&(n.value=!0)});const p=V(()=>{var c;return(c=m.settings)==null?void 0:c.project_url}),w=V(()=>{var c;return(c=m.settings)!=null&&c.project_url?e("view_project"):!1});function r(){_.value===!1&&(n.value=!1)}return(c,k)=>{const S=d("v-progress-linear"),y=J("tooltip");return R((l(),b(Re(p.value?"a":"div"),{href:p.value,target:p.value?"_blank":void 0,rel:p.value?"noopener noreferrer":void 0,class:A(["module-bar-logo",{loading:n.value}])},{default:o(()=>[t.value?(l(),M(Q,{key:0},[a(Se,{name:"fade"},{default:o(()=>[n.value?(l(),b(S,{key:0,indeterminate:"",rounded:"",onAnimationiteration:r})):E("",!0)]),_:1}),U("img",{class:"custom-logo",src:t.value,alt:"Project Logo"},null,8,It)],64)):(l(),M("div",{key:1,class:A(["logo",{running:n.value}]),onAnimationiteration:r},null,34))]),_:1},8,["href","target","rel","class"])),[[y,w.value,void 0,{right:!0}]])}}}),Dt=j(Bt,[["__scopeId","data-v-d86ce83c"]]),Ut={class:"module-bar-avatar"},Tt=["src","alt"],Et=P({__name:"module-bar-avatar",setup(u){const{t:e}=ae(),s=he(),m=re(),{notificationsDrawerOpen:t}=ie(s),{unread:n}=ie(m),_=be(),p=x(!1),w=V(()=>{var y;return!_.currentUser||!("avatar"in _.currentUser)||!((y=_.currentUser)!=null&&y.avatar)?null:Ae(`${_.currentUser.avatar.id}?key=system-medium-cover`)}),r=x(null),c=V(()=>`/users/${_.currentUser.id}`),k=V(()=>"/logout"),S=_.fullName??void 0;return(y,f)=>{const B=d("v-icon"),D=d("v-button"),O=d("v-badge"),N=d("v-card-title"),Z=d("v-card-actions"),se=d("v-card"),X=d("v-dialog"),z=d("v-avatar"),le=d("router-link"),G=d("v-hover"),ee=J("tooltip");return l(),M("div",Ut,[a(O,{value:i(n),disabled:i(n)==0,class:"notifications-badge"},{default:o(()=>[R((l(),b(D,{tile:"",icon:"","x-large":"",class:"notifications",onClick:f[0]||(f[0]=H=>t.value=!0)},{default:o(()=>[a(B,{name:"notifications"})]),_:1})),[[ee,i(e)("notifications"),void 0,{right:!0}]])]),_:1},8,["value","disabled"]),a(G,null,{default:o(({hover:H})=>[a(X,{modelValue:p.value,"onUpdate:modelValue":f[2]||(f[2]=L=>p.value=L),onEsc:f[3]||(f[3]=L=>p.value=!1)},{activator:o(({on:L})=>[a(Se,{name:"sign-out"},{default:o(()=>[H?R((l(),b(D,{key:0,tile:"",icon:"","x-large":"",class:"sign-out",onClick:L},{default:o(()=>[a(B,{name:"logout"})]),_:2},1032,["onClick"])),[[ee,i(e)("sign_out"),void 0,{right:!0}]]):E("",!0)]),_:2},1024)]),default:o(()=>[a(se,null,{default:o(()=>[a(N,null,{default:o(()=>[T(I(i(e)("sign_out_confirm")),1)]),_:1}),a(Z,null,{default:o(()=>[a(D,{secondary:"",onClick:f[1]||(f[1]=L=>p.value=!p.value)},{default:o(()=>[T(I(i(e)("cancel")),1)]),_:1}),a(D,{to:k.value},{default:o(()=>[T(I(i(e)("sign_out")),1)]),_:1},8,["to"])]),_:1})]),_:1})]),_:2},1032,["modelValue"]),a(le,{to:c.value},{default:o(()=>[R((l(),b(z,{tile:"",large:"",class:A({"no-avatar":!w.value})},{default:o(()=>[w.value&&!r.value?(l(),M("img",{key:0,src:w.value,alt:i(S),class:"avatar-image",onError:f[4]||(f[4]=L=>r.value=L)},null,40,Tt)):(l(),b(B,{key:1,name:"account_circle"}))]),_:1},8,["class"])),[[ee,i(S),void 0,{right:!0}]])]),_:1},8,["to"])]),_:1})])}}}),Ot=j(Et,[["__scopeId","data-v-f9f544dc"]]),Lt={class:"module-bar"},At={class:"modules"},Ft=P({__name:"module-bar",setup(u){const e=Ce(),{modules:s}=ot(),m=V(()=>s.value.map(n=>n.id)),t=V(()=>e.settings?(e.settings.module_bar??tt).filter(n=>n.type==="link"?!0:n.enabled&&m.value.includes(n.id)).map(n=>{if(n.type==="link"){const p=ve.omit(n,["url"]);return n.url.startsWith("/")?p.to=n.url:p.href=n.url,nt(p)}const _=s.value.find(p=>p.id===n.id);return{...n,...s.value.find(p=>p.id===n.id),to:`/${_.id}`}}):[]);return(n,_)=>{const p=d("v-icon"),w=d("v-button"),r=J("tooltip");return l(),M("div",Lt,[a(Dt),U("div",At,[(l(!0),M(Q,null,oe(t.value,c=>R((l(),b(w,{key:c.id,icon:"","x-large":"",to:c.to,href:c.href,tile:""},{default:o(()=>[a(p,{name:c.icon},null,8,["name"])]),_:2},1032,["to","href"])),[[r,c.name,void 0,{right:!0}]])),128))]),a(Ot)])}}}),Rt=j(Ft,[["__scopeId","data-v-572954c3"]]),jt={class:"notification-dialogs"},Pt=["href"],qt=P({__name:"notification-dialogs",setup(u){const{t:e}=ae(),s=re(),{isAdmin:m,currentUser:t}=be(),{settings:n}=ie(Ce()),_=V(()=>s.dialogs);function p(r){var S,y,f;if(!((S=n.value)!=null&&S.report_error_url))return at;const c=St(),k={error:{name:r==null?void 0:r.name,message:r==null?void 0:r.message},route:{fullPath:c.fullPath,hash:c.hash,name:c.name,path:c.path,query:c.query},navigator:{language:navigator.language,userAgent:navigator.userAgent},user:{},role:{}};return t!==null&&"id"in t&&(k.user={id:t.id,first_name:t.first_name,last_name:t.last_name,title:t.title,description:t.description,location:t.location,status:t.status},k.role={id:(y=t.role)==null?void 0:y.id,name:(f=t.role)==null?void 0:f.name}),ht(n.value.report_error_url,k)}const w=async r=>{r.dismissAction&&await r.dismissAction(),s.remove(r.id)};return(r,c)=>{const k=d("v-card-title"),S=d("v-error"),y=d("v-card-text"),f=d("v-button"),B=d("v-card-actions"),D=d("v-card"),O=d("v-dialog");return l(),M("div",jt,[(l(!0),M(Q,null,oe(_.value,N=>(l(),b(O,{key:N.id,"model-value":"",persist:""},{default:o(()=>[a(D,{class:A([N.type])},{default:o(()=>[a(k,null,{default:o(()=>[T(I(N.title),1)]),_:2},1024),N.text||N.error?(l(),b(y,{key:0},{default:o(()=>[T(I(N.text)+" ",1),N.error?(l(),b(S,{key:0,error:N.error},null,8,["error"])):E("",!0)]),_:2},1024)):E("",!0),a(B,null,{default:o(()=>[N.type==="error"&&i(m)&&N.code==="UNKNOWN"?(l(),b(f,{key:0,secondary:""},{default:o(()=>[U("a",{target:"_blank",href:p(N.error)},I(i(e)("report_error")),9,Pt)]),_:2},1024)):E("",!0),a(f,{onClick:Z=>w(N)},{default:o(()=>[T(I(N.dismissText??i(e)("dismiss")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024))),128))])}}}),zt=j(qt,[["__scopeId","data-v-8f4b67f7"]]),Ht={key:0,class:"item-count"},Zt={key:1,class:"content"},Gt={key:1,class:"notifications-block"},Kt=["onClick"],Yt={key:0,class:"message"},Qt=P({__name:"notifications-drawer",setup(u){const{t:e,n:s}=ae(),m=he(),t=be(),n=st(),_=re(),p=Fe(),w=x(null),r=x([]),c=x(!1),k=x(["inbox"]),S=x([]),y=x(1),f=x(25),B=x(null),D=x(null),O=x(null),{notificationsDrawerOpen:N}=ie(m);ne(k,(h,C)=>{h[0]!==C[0]&&(r.value=[])}),ne(N,h=>{w.value=h?"directus_notifications":null});const Z=V(()=>({_and:[{recipient:{_eq:t.currentUser.id}},{status:{_eq:k.value[0]}}]})),{items:se,loading:X,totalPages:z,totalCount:le,itemCount:G,getItems:ee,getItemCount:H,getTotalCount:L}=bt(w,{filter:V(()=>yt(D.value,Z.value)),filterSystem:Z,fields:x(["id","subject","message","collection","item","timestamp"]),sort:x(["-timestamp"]),search:B,limit:f,page:y}),te=V(()=>se.value.map(h=>{var q;let C;if(h.collection){const W=n.getCollection(h.collection);(q=W==null?void 0:W.meta)!=null&&q.singleton||!h.item?C=lt(h.collection):C=it(h.collection,h.item)}else String(h.item).startsWith("/")&&(C=String(h.item));return{...h,to:C}})),_e=V(()=>{if(!(!le.value||!G.value))return rt({currentItems:G.value,currentPage:y.value,perPage:f.value,totalItems:le.value,isFiltered:!!D.value,i18n:{t:e,n:s}})}),ue=V(()=>r.value.length>0&&r.value.length<te.value.length),F=V(()=>r.value.length===te.value.length&&te.value.length>0);async function ce(){await ee(),await L(),await H()}async function ye(){F.value?r.value=[]:r.value=te.value.map(h=>h.id)}function we(h){r.value.includes(h)?r.value.splice(r.value.indexOf(h),1):r.value.push(h)}function de(h){S.value.includes(h)?S.value.splice(S.value.indexOf(h),1):S.value.push(h)}async function me(){await Te.patch("/notifications",{keys:r.value,data:{status:k.value[0]==="inbox"?"archived":"inbox"}}),await ce(),await _.refreshUnreadCount(),r.value=[]}async function pe(){try{await Te.delete("/notifications",{data:{keys:r.value}}),await ce(),await _.refreshUnreadCount()}finally{c.value=!1,r.value=[]}}function v(h){p.push(h),N.value=!1}function g(){D.value=null,B.value=null}return(h,C)=>{const q=d("v-icon"),W=d("v-button"),fe=d("v-card-title"),ke=d("v-card-actions"),qe=d("v-card"),ze=d("v-dialog"),Ne=d("v-list-item-icon"),Me=d("v-list-item-content"),xe=d("v-tab"),He=d("v-tabs"),We=d("v-info"),Ze=d("v-skeleton-loader"),Ie=d("v-list"),Be=d("v-checkbox"),Ge=d("v-divider"),De=d("v-text-overflow"),Ke=d("v-list-item"),Ye=d("v-pagination"),Qe=d("v-drawer"),$e=J("tooltip"),Je=J("md");return l(),b(Qe,{modelValue:i(N),"onUpdate:modelValue":C[8]||(C[8]=$=>je(N)?N.value=$:null),icon:"notifications",title:i(e)("notifications"),"sidebar-label":i(e)("folders"),onCancel:C[9]||(C[9]=$=>N.value=!1)},{"actions:prepend":o(()=>[a(Se,{name:"fade"},{default:o(()=>[_e.value?(l(),M("span",Ht,I(_e.value),1)):E("",!0)]),_:1})]),actions:o(()=>[a(ut,{modelValue:B.value,"onUpdate:modelValue":C[0]||(C[0]=$=>B.value=$),filter:D.value,"onUpdate:filter":C[1]||(C[1]=$=>D.value=$),collection:"directus_notifications"},null,8,["modelValue","filter"]),a(ze,{modelValue:c.value,"onUpdate:modelValue":C[3]||(C[3]=$=>c.value=$),disabled:r.value.length===0,onEsc:C[4]||(C[4]=$=>c.value=!1)},{activator:o(({on:$})=>[R((l(),b(W,{rounded:"",icon:"",class:"action-delete",secondary:"",disabled:r.value.length===0,onClick:$},{default:o(()=>[a(q,{name:"delete",outline:""})]),_:2},1032,["disabled","onClick"])),[[$e,i(e)("delete_label"),void 0,{bottom:!0}]])]),default:o(()=>[a(qe,null,{default:o(()=>[a(fe,null,{default:o(()=>[T(I(i(e)("delete_are_you_sure")),1)]),_:1}),a(ke,null,{default:o(()=>[a(W,{secondary:"",onClick:C[2]||(C[2]=$=>c.value=!1)},{default:o(()=>[T(I(i(e)("cancel")),1)]),_:1}),a(W,{kind:"danger",onClick:pe},{default:o(()=>[T(I(i(e)("delete_label")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","disabled"]),R((l(),b(W,{icon:"",rounded:"",disabled:r.value.length===0,secondary:"",onClick:me},{default:o(()=>[a(q,{name:k.value[0]==="inbox"?"archive":"move_to_inbox"},null,8,["name"])]),_:1},8,["disabled"])),[[$e,k.value[0]==="inbox"?i(e)("archive"):i(e)("unarchive"),void 0,{bottom:!0}]])]),sidebar:o(()=>[a(He,{modelValue:k.value,"onUpdate:modelValue":C[5]||(C[5]=$=>k.value=$),vertical:""},{default:o(()=>[a(xe,{value:"inbox"},{default:o(()=>[a(Ne,null,{default:o(()=>[a(q,{name:"inbox"})]),_:1}),a(Me,null,{default:o(()=>[T(I(i(e)("inbox")),1)]),_:1})]),_:1}),a(xe,{value:"archived"},{default:o(()=>[a(Ne,null,{default:o(()=>[a(q,{name:"archive"})]),_:1}),a(Me,null,{default:o(()=>[T(I(i(e)("archive")),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),default:o(()=>[!i(X)&&!i(G)?(l(),M(Q,{key:0},[D.value||B.value?(l(),b(We,{key:0,title:i(e)("no_results"),icon:"search",center:""},{append:o(()=>[a(W,{onClick:g},{default:o(()=>[T(I(i(e)("clear_filters")),1)]),_:1})]),default:o(()=>[T(I(i(e)("no_results_copy"))+" ",1)]),_:1},8,["title"])):(l(),b(We,{key:1,icon:"notifications",title:i(e)("no_notifications"),center:""},{default:o(()=>[T(I(i(e)("no_notifications_copy")),1)]),_:1},8,["title"]))],64)):(l(),M("div",Zt,[i(X)?(l(),b(Ie,{key:0,class:"notifications"},{default:o(()=>[(l(),M(Q,null,oe(10,$=>a(Ze,{key:$,class:A({dense:i(z)>1})},null,8,["class"])),64))]),_:1})):(l(),M("div",Gt,[a(Be,{class:A(["select-all",{dense:i(z)>1}]),label:F.value?i(e)("deselect_all"):i(e)("select_all"),"model-value":F.value,indeterminate:ue.value,"onUpdate:modelValue":ye},null,8,["class","label","model-value","indeterminate"]),a(Ge,{class:A({dense:i(z)>1})},null,8,["class"]),a(Ie,{class:"notifications"},{default:o(()=>[(l(!0),M(Q,null,oe(te.value,$=>(l(),b(Ke,{key:$.id,block:"",dense:i(z)>1,clickable:!!$.message,onMousedown:C[6]||(C[6]=Ue(({target:K})=>O.value=K,["left","self"])),onMouseup:Ue(({target:K})=>{K===O.value&&de($.id),O.value=null},["left","self"])},{default:o(()=>[U("div",{class:"header",onClick:K=>de($.id)},[a(Be,{"model-value":r.value.includes($.id),"onUpdate:modelValue":K=>we($.id)},null,8,["model-value","onUpdate:modelValue"]),a(De,{class:"title",highlight:B.value,text:$.subject},null,8,["highlight","text"]),a(ct,{value:$.timestamp,type:"timestamp",relative:""},{default:o(({datetime:K})=>[a(De,{class:"datetime",text:K},null,8,["text"])]),_:2},1032,["value"]),$.to?R((l(),b(q,{key:0,clickable:"",name:"open_in_new",onClick:K=>v($.to)},null,8,["onClick"])),[[$e,i(e)("goto_collection_content")]]):E("",!0),$.message?(l(),b(q,{key:1,clickable:"",name:S.value.includes($.id)?"expand_less":"expand_more"},null,8,["name"])):E("",!0)],8,Kt),S.value.includes($.id)&&$.message?R((l(),M("div",Yt,null,512)),[[Je,$.message]]):E("",!0)]),_:2},1032,["dense","clickable","onMouseup"]))),128))]),_:1})])),i(z)>1?(l(),b(Ye,{key:2,modelValue:y.value,"onUpdate:modelValue":C[7]||(C[7]=$=>y.value=$),"total-visible":5,length:i(z)},null,8,["modelValue","length"])):E("",!0)]))]),_:1},8,["modelValue","title","sidebar-label"])}}}),Jt=j(Qt,[["__scopeId","data-v-4f3f1b37"]]),Xt={key:0,class:"icon"},en={class:"content"},tn={class:"title selectable"},nn={key:0,class:"text selectable"},on=P({__name:"notification-item",props:{id:{},title:{},text:{},icon:{},type:{default:"info"},tail:{type:Boolean},dense:{type:Boolean},showClose:{type:Boolean},loading:{type:Boolean},progress:{},alwaysShowText:{type:Boolean},dismissText:{},dismissIcon:{},dismissAction:{}},setup(u){const e=u,s=re(),m=async()=>{e.showClose===!0&&(e.dismissAction&&await e.dismissAction(),s.remove(e.id))};return(t,n)=>{const _=d("v-progress-circular"),p=d("v-icon"),w=J("tooltip");return l(),M("div",{class:A(["notification-item",[t.type,{tail:t.tail,dense:t.dense,"show-text":t.alwaysShowText}]]),onClick:m},[t.loading||t.progress||t.icon?(l(),M("div",Xt,[t.loading?(l(),b(_,{key:0,indeterminate:"",small:""})):t.progress?(l(),b(_,{key:1,small:"",value:t.progress},null,8,["value"])):(l(),b(p,{key:2,name:t.icon},null,8,["name"]))])):E("",!0),U("div",en,[U("p",tn,I(t.title),1),t.text?(l(),M("p",nn,I(t.text),1)):E("",!0)]),t.showClose?R((l(),b(p,{key:1,name:t.dismissIcon??"close",clickable:"",class:"close",onClick:m},null,8,["name"])),[[w,t.dismissText]]):E("",!0)],2)}}}),Pe=j(on,[["__scopeId","data-v-efae6d48"]]),an=P({__name:"notifications-group",props:{sidebarOpen:{type:Boolean}},setup(u){const e=re(),s=Ve(e).queue;return(m,t)=>(l(),b(Le,{class:A(["notifications-group",{"sidebar-open":m.sidebarOpen}]),name:"slide-fade",tag:"div"},{default:o(()=>[Y(m.$slots,"default",{},void 0,!0),(l(!0),M(Q,null,oe(i(s),(n,_)=>(l(),b(Pe,{id:n.id,key:n.id,title:n.title,text:n.text,icon:n.icon,type:n.type,loading:n.loading,progress:n.progress,tail:_===i(s).length-1,dense:m.sidebarOpen===!1,"show-close":n.persist===!0&&n.closeable!==!1,"always-show-text":n.alwaysShowText,"dismiss-icon":n.dismissIcon,"dismiss-text":n.dismissText,"dismiss-action":n.dismissAction},null,8,["id","title","text","icon","type","loading","progress","tail","dense","show-close","always-show-text","dismiss-icon","dismiss-text","dismiss-action"]))),128))]),_:3},8,["class"]))}}),sn=j(an,[["__scopeId","data-v-f0dfbda2"]]),ln={class:"icon"},rn={key:0,class:"title"},un=P({__name:"sidebar-button",props:{to:{},icon:{default:"box"},active:{type:Boolean}},emits:["click"],setup(u){const e=he(),{sidebarOpen:s}=Ve(e);return(m,t)=>{const n=d("v-icon");return l(),b(Re(m.to?"router-link":"button"),{class:A(["sidebar-button",{active:m.active}]),onClick:t[0]||(t[0]=_=>m.$emit("click",_))},{default:o(()=>[U("div",ln,[a(n,{name:m.icon},null,8,["name"])]),i(s)?(l(),M("div",rn,[Y(m.$slots,"default",{},void 0,!0)])):E("",!0)]),_:3},8,["class"])}}}),cn=j(un,[["__scopeId","data-v-3acfa986"]]),dn={class:"notifications-preview"},vn={key:0,class:"inline"},_n={class:"padding-box"},mn=P({__name:"notifications-preview",props:{sidebarOpen:{type:Boolean},modelValue:{type:Boolean}},emits:["update:modelValue"],setup(u){const{t:e}=ae(),s=re(),{lastFour:m}=ie(s);return(t,n)=>{const _=d("router-link"),p=d("transition-expand"),w=J("tooltip");return l(),M("div",dn,[a(p,{tag:"div"},{default:o(()=>[t.modelValue?(l(),M("div",vn,[U("div",_n,[a(_,{class:A(["link",{"has-items":i(m).length>0}]),to:"/activity"},{default:o(()=>[T(I(i(e)("show_all_activity")),1)]),_:1},8,["class"]),a(Le,{tag:"div",name:"notification",class:"transition"},{default:o(()=>[(l(!0),M(Q,null,oe(i(m),r=>(l(),b(Pe,Ct({key:r.id,ref_for:!0},r),null,16))),128))]),_:1})])])):E("",!0)]),_:1}),R((l(),b(cn,{active:t.modelValue,class:"toggle",icon:"pending_actions",onClick:n[0]||(n[0]=r=>t.$emit("update:modelValue",!t.modelValue))},{default:o(()=>[T(I(i(e)("activity_log")),1)]),_:1},8,["active"])),[[w,!t.sidebarOpen&&i(e)("activity_log"),void 0,{left:!0}]])])}}}),pn=j(mn,[["__scopeId","data-v-63e60302"]]),Oe=u=>Number.isFinite(u)?u:0;function fn(u){return{days:Math.trunc(u/864e5),hours:Math.trunc(u/36e5%24),minutes:Math.trunc(u/6e4%60),seconds:Math.trunc(u/1e3%60),milliseconds:Math.trunc(u%1e3),microseconds:Math.trunc(Oe(u*1e3)%1e3),nanoseconds:Math.trunc(Oe(u*1e6)%1e3)}}function gn(u){return{days:u/86400000n,hours:u/3600000n%24n,minutes:u/60000n%60n,seconds:u/1000n%60n,milliseconds:u%1000n,microseconds:0n,nanoseconds:0n}}function hn(u){switch(typeof u){case"number":{if(Number.isFinite(u))return fn(u);break}case"bigint":return gn(u)}throw new TypeError("Expected a finite number or bigint")}const bn=u=>u===0||u===0n,yn=(u,e)=>e===1||e===1n?u:`${u}s`,wn=1e-7,kn=24n*60n*60n*1000n;function ge(u,e){const s=typeof u=="bigint";if(!s&&!Number.isFinite(u))throw new TypeError("Expected a finite number or bigint");e={...e};const m=u<0?"-":"";u=u<0?-u:u,e.colonNotation&&(e.compact=!1,e.formatSubMilliseconds=!1,e.separateMilliseconds=!1,e.verbose=!1),e.compact&&(e.unitCount=1,e.secondsDecimalDigits=0,e.millisecondsDecimalDigits=0);let t=[];const n=(c,k)=>{const S=Math.floor(c*10**k+wn);return(Math.round(S)/10**k).toFixed(k)},_=(c,k,S,y)=>{if(!((t.length===0||!e.colonNotation)&&bn(c)&&!(e.colonNotation&&S==="m"))){if(y??(y=String(c)),e.colonNotation){const f=y.includes(".")?y.split(".")[0].length:y.length,B=t.length>0?2:1;y="0".repeat(Math.max(0,B-f))+y}else y+=e.verbose?" "+yn(k,c):S;t.push(y)}},p=hn(u),w=BigInt(p.days);if(e.hideYearAndDays?_(BigInt(w)*24n+BigInt(p.hours),"hour","h"):(e.hideYear?_(w,"day","d"):(_(w/365n,"year","y"),_(w%365n,"day","d")),_(Number(p.hours),"hour","h")),_(Number(p.minutes),"minute","m"),!e.hideSeconds)if(e.separateMilliseconds||e.formatSubMilliseconds||!e.colonNotation&&u<1e3){const c=Number(p.seconds),k=Number(p.milliseconds),S=Number(p.microseconds),y=Number(p.nanoseconds);if(_(c,"second","s"),e.formatSubMilliseconds)_(k,"millisecond","ms"),_(S,"microsecond","µs"),_(y,"nanosecond","ns");else{const f=k+S/1e3+y/1e6,B=typeof e.millisecondsDecimalDigits=="number"?e.millisecondsDecimalDigits:0,D=f>=1?Math.round(f):Math.ceil(f),O=B?f.toFixed(B):D;_(Number.parseFloat(O),"millisecond","ms",O)}}else{const c=(s?Number(u%kn):u)/1e3%60,k=typeof e.secondsDecimalDigits=="number"?e.secondsDecimalDigits:1,S=n(c,k),y=e.keepDecimalsOnWholeSeconds?S:S.replace(/\.0+$/,"");_(Number.parseFloat(y),"second","s",y)}if(t.length===0)return m+"0"+(e.verbose?" milliseconds":"ms");const r=e.colonNotation?":":" ";return typeof e.unitCount=="number"&&(t=t.slice(0,Math.max(e.unitCount,1))),m+t.join(r)}const $n={class:"latency-indicator"},Sn=P({__name:"latency-indicator",setup(u){const{t:e}=ae(),s=dt(),m=V(()=>{const w=ve.sortBy(s.latency,["timestamp"]);return w[w.length-1]}),t=V(()=>{if(!s.latency||s.latency.length===0)return 0;const w=ve.sortBy(s.latency,["timestamp"]),r=w.slice(Math.max(w.length-5,0));let c=0;for(const{latency:k}of r)c+=k;return Math.round(c/r.length)}),n=V(()=>t.value<=250?4:t.value>250&&t.value<=500?3:t.value>500&&t.value<=750?2:1),_=V(()=>{switch(n.value){case 4:return`${e("connection_excellent")}
(${ge(t.value)} ${e("latency")})`;case 3:return`${e("connection_good")}
(${ge(t.value)} ${e("latency")})`;case 2:return`${e("connection_fair")}
(${ge(t.value)} ${e("latency")})`;case 1:return`${e("connection_poor")}
(${ge(t.value)} ${e("latency")})`;default:return null}}),p=V(()=>{switch(n.value){case 4:return"signal_wifi_4_bar";case 3:return"signal_wifi_3_bar";case 2:return"signal_wifi_2_bar";case 1:return"signal_wifi_1_bar";default:return null}});return(w,r)=>{const c=d("v-progress-circular"),k=d("v-icon"),S=J("tooltip");return R((l(),M("div",$n,[m.value?(l(),b(k,{key:1,name:p.value},null,8,["name"])):(l(),b(c,{key:0,indeterminate:""}))])),[[S,_.value,void 0,{bottom:!0,end:!0}]])}}}),Cn=j(Sn,[["__scopeId","data-v-93933dfa"]]),Vn={class:"project-info"},Nn={class:"name-container"},Mn=P({__name:"project-info",setup(u){const e=vt(),s=V(()=>{var t,n;return(n=(t=e.info)==null?void 0:t.project)==null?void 0:n.project_name}),m=V(()=>{var t,n;return(n=(t=e.info)==null?void 0:t.project)==null?void 0:n.project_descriptor});return(t,n)=>{const _=d("v-text-overflow");return l(),M("div",Vn,[a(Cn),U("div",Nn,[a(_,{class:"name",text:s.value,placement:"bottom"},null,8,["text"]),m.value?(l(),b(_,{key:0,class:"descriptor",text:m.value,placement:"bottom"},null,8,["text"])):E("",!0)])])}}}),xn=j(Mn,[["__scopeId","data-v-7234130c"]]),Wn=P({__name:"sidebar-detail-group",props:{sidebarOpen:{type:Boolean}},setup(u){const e=u,s=_t("sidebar-open-detail",[]),m=x(!1);return ne(()=>e.sidebarOpen,async t=>{t===!1?s.value=[]:(m.value=!0,await Vt(),m.value=!1)}),(t,n)=>{const _=d("v-item-group");return l(),b(_,{modelValue:i(s),"onUpdate:modelValue":n[0]||(n[0]=p=>je(s)?s.value=p:null),class:"sidebar-detail-group",scope:"sidebar-detail",mandatory:m.value},{default:o(()=>[Y(t.$slots,"default",{},void 0,!0)]),_:3},8,["modelValue","mandatory"])}}}),In=j(Wn,[["__scopeId","data-v-abc8855b"]]),Bn={class:"module-nav alt-colors"},Dn={class:"module-nav-content"},Un={class:"content-wrapper"},Tn={class:"flex-container"},En=P({__name:"private-view",props:{title:{},smallHeader:{type:Boolean},headerShadow:{type:Boolean,default:!0},splitView:{type:Boolean},splitViewMinWidth:{default:0},sidebarShadow:{type:Boolean}},emits:["update:splitView"],setup(u,{emit:e}){var me,pe;const s={moduleBarWidth:60,minModuleNavWidth:220,minContentWidth:590,collapsedSidebarWidth:60,overlaySpace:60},m=u,t=e,{t:n}=ae(),_=Fe(),p=V(()=>m.title??null),w=wt(m,"splitView",t),r=x(),c=x(),k=x();let S;const y=()=>{var v;clearTimeout(S),(v=r.value)==null||v.classList.remove("hide-overflow-x")};ne(w,()=>{if(!r.value||!c.value)return;r.value.classList.add("hide-overflow-x","hide-overflow-y"),S=setTimeout(y,1500);let v,g;const h=()=>{var C;clearTimeout(v),g==null||g(),(C=r.value)==null||C.classList.remove("hide-overflow-y")};v=setTimeout(h,1500),g=mt(c.value,"transitionend",h)});const{width:f}=pt(),{width:B}=kt(k),D=V(()=>{if(!w.value)return!0;let v;return f.value>=1260?v=f.value-s.moduleBarWidth-s.minModuleNavWidth-s.minContentWidth-B.value:f.value>=960?v=f.value-s.moduleBarWidth-s.minModuleNavWidth-s.minContentWidth-s.collapsedSidebarWidth:v=f.value-s.minContentWidth,v>=m.splitViewMinWidth}),{data:O}=ft("module-width",{}),N=x(de((me=O.value)==null?void 0:me.nav,s.minModuleNavWidth));ne(N,ve.debounce(v=>{O.value={...O.value??{},nav:v}},300));const Z=x(de((pe=O.value)==null?void 0:pe.main,s.minContentWidth));ne(Z,ve.debounce(v=>{O.value={...O.value??{},main:v}},300));const se=x(!1),X=V(()=>{const v=w.value?m.splitViewMinWidth:0,g=D.value?s.minContentWidth+v:s.minContentWidth;let h;return f.value>=1260?h=f.value-s.moduleBarWidth-g-B.value:f.value>=960?h=f.value-s.moduleBarWidth-g-s.collapsedSidebarWidth:h=f.value-s.moduleBarWidth+s.overlaySpace,Math.max(h,s.minModuleNavWidth)}),z=V(()=>{const v=w.value?m.splitViewMinWidth:0;let g;return f.value>=1260?g=f.value-s.moduleBarWidth-N.value-v-B.value:f.value>=960?g=f.value-s.moduleBarWidth-N.value-v-s.collapsedSidebarWidth:g=f.value-v,Math.max(g,s.minContentWidth)}),le=V(()=>({snapZones:[{width:40,snapPos:s.minModuleNavWidth,direction:"left"},{width:40,snapPos:X.value,direction:"right"}]})),G=x(!1),ee=V(()=>({snapZones:[{width:40,snapPos:s.minContentWidth,direction:"left"},{width:40,snapPos:z.value,direction:"right"}],alwaysShowHandle:!0,disableTransition:se.value})),H=x(!1),L=be(),te=he(),_e=V(()=>{var v;return L.currentUser?((v=L.currentUser)==null?void 0:v.app_access)||!1:!0}),ue=x(!1),{sidebarOpen:F,fullScreen:ce}=ie(te),ye=V(()=>L.currentUser&&"appearance"in L.currentUser?L.currentUser.appearance:"auto");Nt("main-element",r),_.afterEach((v,g)=>{var h;!v.meta.isFloatingView&&!g.meta.isFloatingView&&((h=r.value)==null||h.scrollTo({top:0})),ce.value=!1}),$t({title:p});function we(v){v.target&&v.target.classList.contains("close")===!1&&(F.value=!0)}function de(v,g){return v&&!Number.isNaN(v)?Number(v):g}return(v,g)=>{const h=d("v-button"),C=d("v-info"),q=d("v-overlay");return _e.value===!1?(l(),b(C,{key:0,center:"",title:i(n)("no_app_access"),type:"danger",icon:"block"},{append:o(()=>[a(h,{to:"/logout"},{default:o(()=>[T(I(i(n)("switch_user")),1)]),_:1})]),default:o(()=>[T(I(i(n)("no_app_access_copy"))+" ",1)]),_:1},8,["title"])):(l(),M("div",{key:1,class:A(["private-view",{appearance:ye.value,"full-screen":i(ce),splitView:v.splitView}])},[U("aside",{id:"navigation",role:"navigation","aria-label":"Module Navigation",class:A({"is-open":H.value,"has-shadow":v.sidebarShadow})},[a(Rt),a(Ee,{width:N.value,"onUpdate:width":g[0]||(g[0]=W=>N.value=W),"min-width":s.minModuleNavWidth,"max-width":X.value,options:le.value,onDragging:g[1]||(g[1]=W=>se.value=W),onTransitionEnd:y},{default:o(()=>[U("div",Bn,[a(xn),U("div",Dn,[Y(v.$slots,"navigation",{},void 0,!0)])])]),_:3},8,["width","min-width","max-width","options"])],2),U("div",{id:"main-content",ref_key:"contentEl",ref:r,class:"content"},[a(gt,{ref_key:"headerBarEl",ref:c,small:v.smallHeader||v.splitView,shadow:v.headerShadow||v.splitView,"show-sidebar-toggle":"",title:v.title,"onToggle:sidebar":g[2]||(g[2]=W=>F.value=!i(F)),onPrimary:g[3]||(g[3]=W=>H.value=!H.value)},Mt({_:2},[oe(v.$slots,(W,fe)=>({name:fe,fn:o(ke=>[Y(v.$slots,fe,xt(Wt(ke)),void 0,!0)])}))]),1032,["small","shadow","title"]),U("div",Un,[a(Ee,{width:Z.value,"onUpdate:width":g[4]||(g[4]=W=>Z.value=W),"min-width":s.minContentWidth,"max-width":z.value,disabled:!i(w),options:ee.value,onDragging:g[5]||(g[5]=W=>G.value=W)},{default:o(()=>[R(U("main",null,[Y(v.$slots,"default",{},void 0,!0)],512),[[Xe,D.value]])]),_:3},8,["width","min-width","max-width","disabled","options"]),v.splitView?(l(),M("div",{key:0,id:"split-content",class:A({"is-dragging":G.value})},[Y(v.$slots,"splitView",{},void 0,!0)],2)):E("",!0)])],512),U("aside",{id:"sidebar",ref_key:"sidebarEl",ref:k,role:"contentinfo",class:A(["alt-colors",{"is-open":i(F),"has-shadow":v.sidebarShadow}]),"aria-label":"Module Sidebar",onClick:we},[U("div",Tn,[a(In,{"sidebar-open":i(F)},{default:o(()=>[Y(v.$slots,"sidebar",{},void 0,!0)]),_:3},8,["sidebar-open"]),g[9]||(g[9]=U("div",{class:"spacer"},null,-1)),a(pn,{modelValue:ue.value,"onUpdate:modelValue":g[6]||(g[6]=W=>ue.value=W),"sidebar-open":i(F)},null,8,["modelValue","sidebar-open"])])],2),a(q,{class:"nav-overlay",active:H.value,onClick:g[7]||(g[7]=W=>H.value=!1)},null,8,["active"]),a(q,{class:"sidebar-overlay",active:i(F),onClick:g[8]||(g[8]=W=>F.value=!1)},null,8,["active"]),a(Jt),ue.value===!1?(l(),b(sn,{key:0,"sidebar-open":i(F)},null,8,["sidebar-open"])):E("",!0),a(zt)],2))}}}),qn=j(En,[["__scopeId","data-v-1063c8dc"]]);export{qn as PrivateView,qn as default};
